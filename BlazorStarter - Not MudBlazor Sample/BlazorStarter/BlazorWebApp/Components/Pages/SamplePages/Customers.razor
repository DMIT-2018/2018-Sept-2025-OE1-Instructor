@page "/SamplePages/Customers"

<PageTitle>Customer Search</PageTitle>

<MudText Typo="Typo.h3">Customer Search</MudText>

<DMIT2018FeedbackAndErrorDisplay ErrorDetails="@errorDetails" ErrorMessage="@errorMessage" FeedbackMessage="@feedbackMessage" />

<MudStack Row AlignItems="AlignItems.Center">
    <MudTextField @bind-Value="lastName"
                  Variant="Variant.Outlined"
                  Label="Last Name"
                  Immediate />
    <MudTextField @bind-Value="phoneNumber"
                  Variant="Variant.Outlined"
                  Label="Phone Number"
                  Immediate />
    <MudButton Variant="Variant.Outlined"
               Color="Color.Secondary"
               OnClick="GetCustomers">
        Search       
    </MudButton>
    <MudButton Variant="Variant.Outlined"
               Color="Color.Tertiary"
               OnClick="NewCustomer">
        Add Customer       
    </MudButton>
</MudStack>

<MudDataGrid Items="CustomerList"
             Striped
             FixedFooter
             FixedHeader
             Height="62vh">
    <Columns>
        <TemplateColumn>
            <HeaderTemplate>
                Actions
            </HeaderTemplate>
            <CellTemplate>
                <MudButton Variant="Variant.Filled"
                           Color="Color.Tertiary"
                           OnClick="() => EditCustomer(context.Item.CustomerID)">
                    Edit
                </MudButton>
            </CellTemplate>
        </TemplateColumn>
        <PropertyColumn Property="x => x.FullName" Title="Customer Name" />
        <PropertyColumn Property="x => x.Address" Title="Address" />
        <PropertyColumn Property="x => x.Phone" Title="Phone Number" />
        <PropertyColumn Property="x => x.Email" Title="Email" />
        <PropertyColumn Property="x => x.Status" Title="Status" />
        <PropertyColumn Property="@(x => x.TotalSales > 0
                                        ? x.TotalSales.ToString("C2")
                                        : string.Empty)" Title="Total Sales"  />
    </Columns>
    <PagerContent>
        <MudDataGridPager />
    </PagerContent>
</MudDataGrid>